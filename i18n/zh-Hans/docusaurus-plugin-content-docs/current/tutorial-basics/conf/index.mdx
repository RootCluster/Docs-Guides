---
slug: /conf
sidebar_position: 0
title: 配置
hide_comment: true
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Docusaurus 之所以如此受欢迎，是因为其配置简单，仅需简单的配置就可以实现强大的功能，并且支持丰富的自定义能力。由于官方默认 文档 Style 配置，在此基础上发现 Docusaurus 也很适合作为书本 Style，当然你也可以自定义开发，我这里仅仅是在使用官方提供的常用配置功能来演示

本篇文章是两种风格的一些通用配置，当然官方还有很多的配置，这里只列举了常用的配置，更多配置可以参考官方文档 [docusaurus.config.js](https://docusaurus.io/zh-CN/docs/api/docusaurus-config)

## [侧边栏](https://docusaurus.io/zh-CN/docs/next/sidebar)

侧边栏有两种方式，一种是手动配置，另一种可根据指定路径自动生成，无论使用那种方式都需要两步：

### 1. 定义 sidebar.ts

在配置侧边栏时有多种类型

1. Doc: 文档页面的链接，并和侧边栏绑定
2. Link：内部或外部页面链接
3. Category：创建侧边栏项下拉菜单
4. Autogenerated：自动生成侧边栏切片
5. HTML：在这个位置渲染纯 HTML
6. *Ref：链接到文档页面，但项目不会参与生成导航

<Tabs>
    <TabItem value="doc" label="Doc" default>
        ```ts {3-8,10} showLineNumbers title="sidebars.ts"
        export default {
          mySidebar: [
            // 常规语法：
            {
              type: 'doc',
              id: 'doc1', // 文档 ID
              label: 'Getting started', // 侧边栏标签
            },
            // 简写语法：
            'doc2', // 文档 ID
            ],
        };
        ```
    </TabItem>
    <TabItem value="link" label="Link">
        ```ts {3-8,10-15} showLineNumbers title="sidebars.ts"
        export default {
          myLinksSidebar: [
            // 外部链接
            {
              type: 'link',
              label: 'Facebook', // 链接标签
              href: 'https://facebook.com', // 外部 URL
            },

            // 内部链接
            {
              type: 'link',
              label: 'Home', // 链接标签
              href: '/', // 内部路径
            },
          ],
        };
        ```
    </TabItem>
    <TabItem value="category" label="Category">
        ```ts {3-27} showLineNumbers title="sidebars.ts"
        export default {
          docs: [
            {
              type: 'category',
              label: 'Guides',
              link: {
                // 快速生成介绍文档
                type: 'generated-index',
                // 侧边栏标签
                title: 'Docusaurus 教程',
                // Guides 目录介绍
                description: '学习最重要的 Docusaurus 概念!',
                // 自定义生成页面的路径
                slug: '/category/docusaurus-guides',
                keywords: ['guides'],
                image: '/img/docusaurus.png',
              },
              // 侧边栏 Guides 目录列表
              items: [
                'creating-pages',
                {
                  type: 'category',
                  label: 'Docs',
                  items: ['introduction', 'sidebar', 'markdown-features', 'versioning'],
                },
              ],
            },
          ],
        };
        ```

        在 Category 或 Autogenerated 类型下，侧边栏的索引页配置可以使用 `_category_.yml` 或 `_category_.json` 文件来配置

        <Tabs>
            <TabItem value="yml" label="_category_.yml" default>
                yml 配置，推荐使用，link 为空时，即不会生成索引页
                ```yaml
                position: 2.5 # 支持浮点数序号
                label: '教程' # 侧边栏标签
                collapsible: true # 让类别可折叠
                collapsed: false # 让类别默认开启
                className: red # 标签类名定义
                link:
                  type: generated-index
                  title: 教程总览
                customProps:
                  description: 这个描述可以用在 swizzle 的 DocCard 里
                ```
            </TabItem>
            <TabItem value="json" label="_category_.json">
                json 配置，`description` 索引页文本内容
                ```json
                {
                  "position": 2.5,
                  "label": "教程",
                  "collapsible": true,
                  "collapsed": false,
                  "className": "red",
                  "link": {
                    "type": "generated-index",
                    "title": "教程总览"
                  },
                  "customProps": {
                    "description": "这个描述可以用在 swizzle 的 DocCard 里"
                  }
                }
                ```
            </TabItem>
        </Tabs>
    </TabItem>
    <TabItem value="html" label="HTML">
        ```ts {3-7} showLineNumbers title="sidebars.ts"
        export default {
          myHtmlSidebar: [
            {
              type: 'html', // 要渲染的 HTML
              value: '<img src="sponsor.png" alt="Sponsor" />',
              defaultStyle: true,  // 使用默认的菜单项目样式
            },
          ],
        };
        ```
    </TabItem>
    <TabItem value="atuo" label="Autogenerated">
        ```ts {3-6} showLineNumbers title="sidebars.ts"
        export default {
          myAutogeneratedSidebar: [
            {
              type: 'autogenerated',
              dirName: '.', // '.' 即当前 docs 文件夹
            },
          ],
        };
        ```
    </TabItem>
    <TabItem value="ref" label="Ref">
        ```ts {6} showLineNumbers title="sidebars.ts"
        export default {
          tutorialSidebar: {
            'Category A': [
              'doc1',
              'doc2',
              {type: 'ref', id: 'commonDoc'},
              'doc5',
            ],
          },
          apiSidebar: ['doc3', 'doc4', 'commonDoc'],
        };
        ```
    </TabItem>
</Tabs>

### 2. docusaurus.config.ts

直接将此对象传入 `@docusaurus/plugin-docs` 或通过 `@docusaurus/preset-classic` 传入

```ts showLineNumbers title="docusaurus.config.ts"
export default {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          // highlight-next-line
          sidebarPath: './sidebars.ts',
        },
      },
    ],
  ],
};
```

## [主题颜色](https://docusaurus.io/zh-CN/docs/styling-layout#global-styles)

可通过 [Infima](https://docusaurus.io/zh-CN/docs/styling-layout#styling-your-site-with-infima) 进行生成主题色

```css title="src/css/custom.css"
/* 默认颜色. */
:root {
  --ifm-color-primary: #2e8555;
  --ifm-color-primary-dark: #29784c;
  --ifm-color-primary-darker: #277148;
  --ifm-color-primary-darkest: #205d3b;
  --ifm-color-primary-light: #33925d;
  --ifm-color-primary-lighter: #359962;
  --ifm-color-primary-lightest: #3cad6e;
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1);
}

/* dark 模式颜色. */
[data-theme='dark'] {
  --ifm-color-primary: #25c2a0;
  --ifm-color-primary-dark: #21af90;
  --ifm-color-primary-darker: #1fa588;
  --ifm-color-primary-darkest: #1a8870;
  --ifm-color-primary-light: #29d5b0;
  --ifm-color-primary-lighter: #32d8b4;
  --ifm-color-primary-lightest: #4fddbf;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3);
}
```

## 代码块

:::info

- Docusaurus: [默认支持的高亮语言](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/generate-prism-languages/index.ts#L9-L23)
- Prism: [可配置支持语言](https://prismjs.com/#supported-languages)

:::

以下展示了 Docusaurus 默认不支持的语言配置

```ts title="docusaurus.config.ts"
const config: Config = {
  themeConfig: {
    prism: {
      // highlight-start
      additionalLanguages: [
        'java',
        'bash',
        'json'
      ],
      // highlight-end
    }
  }
}
```

> 在 3.4.0 版本，[由于 jiti 版本问题](https://github.com/facebook/docusaurus/issues/10199#issuecomment-2149368485)，添加 Docusaurus 不支持的语言，并未生效，可对 `jiti` 的版本强制指定
> ```json title="package.json"
> "resolutions": {
>   "jiti": "1.21.0"},
> ```

import DocCardList from '@theme/DocCardList';

<DocCardList/>
